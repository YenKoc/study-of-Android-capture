# HTTPS抓包详解
- 抓包的核心原理: 抓住包处在明文状态的一切时机
- HTTPS抓包的种类:HTTP框架hook、系统框架hook、中间人抓包
- 搭建环境抓去HTTP：Charles、BurpSuite
- HTTP的缺陷:
    - 通信使用明文（不加密），内容可能会被窃听
    - 不验证通信方的身份，因此有可能遭遇伪装
    - 无法证明明文的完整性，所以有可能已遭篡改
1. 前期准备  
- 先将虚拟机的网络切换成桥接模式，因为桥接是相当于在局域网上新增了一台设备，而nat模式，则是主机下的子网，外面的设备也无法访问子网，所以需要先切换成桥接
具体连接模式见博客:https://segmentfault.com/a/1190000016926655 ,也说了mac下如何操作，尝试了下直接切换成桥接，虚拟机的ip和我的ip就直接在一个网段上了，并且可以互相ping通，可能是vmfusion高版本已经帮忙做好了？
2. charles下载并配置
因为是配置在虚拟机上，所以软件也是下载并安装到虚拟机上的，肉丝的做法，把火狐设置代理，将代理设置成本机，端口是本机机场管理所占的端口，我用的是clashx，设置好节点后，查看设置是在7890端口，所以在虚拟机上的火狐端口设置成7890，在虚拟机设置好代理后，直接可以进charles官网进行一波下载，并在这个地址下好破解的jar包替换原有的/lib/charles.jar文件，然后在bin目录下./charles启动软件就好了，切换到我们的手机上，在wifi高级设置下，设置代理为虚拟机的charles，ip为虚拟机的ip，端口则为charles的端口，设置好后，charles会弹出一个对话框，点击同意，前面步骤没问题的话，charles就可以抓到http了。
3. Burp pro下载并配置  
虚拟机开启ssh服务，链接:https://wx.zsxq.com/dweb2/index/search/ssh
然后下载一个ftp软件，因为这样移动文件过去方便，因为我是mac，所以推荐个软件royaltsx，在b站上找到一个教学视频，还行,https://www.bilibili.com/video/av70623689/ ,功能还挺强大的，插件很多，我目前只用到File Transfer，用这个软件连接上虚拟机，开始把bp传进去，直接解压，找个bp破解的博客，直接弄完就结束了。
4. 总结: 按我个人理解的设置代理其实就是设置流量的走向，往哪走，比如手机wifi设置代理成虚拟机的charles端口，那么流量会往这走，如果我在charles再设置代理为机场，那么我的流量会再次从机场出去，那么手机就实现了翻墙，有点意思